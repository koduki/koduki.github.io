<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Introduction Goby</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<script src="js/mermaid.min.js"></script>
		<script>mermaid.initialize({startOnLoad:true});</script>
		<style>
			.reveal .slides  {
				text-align: left;
			}
			.reveal h1,
			.reveal h2,
			.reveal h3,
			.reveal h4,
			.reveal h5,
			.reveal h6 {
				text-transform: none;
			}
			.reveal h2 {
				font-size:120%;
			}
			.reveal strong{
				color:yellow;

			}
		</style>
		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
		      <section data-markdown=""
            data-separator="^\n---$"
            data-separator-vertical="^\n>>>$">
        <script type="text/template">

Rubyãƒ©ã‚¤ã‚¯ãªGoãƒ™ãƒ¼ã‚¹è¨€èª: Goby
----------------------------------

2017/10/17

@koduki

---

## è‡ªå·±ç´¹ä»‹
- - -

<img src="twitter.png"></img>
- [@koduki](https://twitter.com/koduki)
- å¤©ç¥ã‚ãŸã‚Šã§åƒãJavaã‹Scalaã‚„RubyãŒå¥½ããªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
- Goã¯èˆˆå‘³ã¯ã¾ã ã¾ã åˆå¿ƒè€…ã€‚Gossã¨ã‹ã‹ãªã‚Šæ°—ã«ãªã‚Šã¾ã™

---

## ã¡ã‚‡ã£ã¨å®£ä¼
- - -

- **10æœˆ28æ—¥**ã«æ¥½å¤©ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ 2017ã‚’ã‚„ã‚Šã¾ã™ï¼
- ç¦å²¡ä¼šå ´ã¯**åšå¤šé§…å‰**ã®æ¥½å¤©ã‚ªãƒ•ã‚£ã‚¹
- æ±äº¬ã¨ã®ã‚µãƒ†ãƒ©ã‚¤ãƒˆä¸­ç¶™ã‚„ç¦å²¡ç¤¾å“¡ã®ç™ºè¡¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
- æ®‹å¿µãªãŒã‚‰Goã®è©±ã¯ãªã„ã‘ã‚Œã©**ãƒ“ãƒ¼ãƒ«**ã¨ãƒ”ã‚¶ï¼Ÿã‚‚ã‚ã‚‹ã®ã§ãœã²ãŠè¶Šã—ã‚’

https://tech.rakuten.co.jp/rtc2017/satellite/fukuoka/
https://fb.com/groups/fukuokas/permalink/1429932410376426/

---

## Goby
- - -

- Goè¨€èªè£½ã®Rubyãƒ©ã‚¤ã‚¯ãªè¨€èªå®Ÿè£…
- YACCç­‰ã¯ä½¿ã‚ãšã«**Goã®ã¿**ã§ãƒ‘ãƒ¼ã‚µã‚„ã‚¹ã‚¿ãƒƒã‚¯ãƒã‚·ãƒ³ãƒ™ãƒ¼ã‚¹ã®VMã‚’ä½œæˆ
- å‡ºæ¥ãŸã°ã‹ã‚Šã ãŒé–‹ç™ºã¯ã¨ã¦ã‚‚æ´»ç™ºã€‚**ä»Šæ—¥ã‚‚**ã‚³ãƒŸãƒƒãƒˆã‚ã‚Šã¾ã—ãŸï¼

- https://github.com/goby-lang/goby
- https://sample.goby-lang.org/

---

## æ–‡æ³•
- - -

- 100%äº’æ›ã§ã¯ãªã„ãŒRubyãƒ©ã‚¤ã‚¯ãªæ–‡æ³•ã¨Goã®è¦ç´ 
- ç¾æ™‚ç‚¹ã§ã¯ãƒ¡ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°çš„ãªéƒ¨åˆ†å®Ÿè£…ã•ã‚Œã¦ã„ãªã„

```ruby
class Goby < Ruby
	include Go
end
```

---

## ä¾‹
- - -

- æ™®é€šã«ã‚¯ãƒ©ã‚¹ã¨ã‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã‹ãƒ–ãƒ­ãƒƒã‚¯ã‚‚ä½¿ãˆã‚‹

```ruby
class Number
	def initialize(n)
		@n = n   
	end

	def show
		puts @n
	end
end

(1..10).to_a.map do |n| 
	Number.new n
end.each do |n| 
	n.show 
end
```

---

## é€Ÿã„ã®ï¼Ÿ
- - -

- ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—ã§ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

```ruby
def fib(n)
	if n <= 1
		n
	else 
		fib(n - 1) + fib(n - 2)
	end
end

puts fib(30)
```

---

## ãƒ™ãƒ³ãƒçµæœ
- - -

- ç¾æ™‚ç‚¹ã§ã¯Rubyã®åœ§å‹ã€‚æ®‹å¿µãªãŒã‚‰Goä¸¦ã¿ã§ã¯ãªã„
- ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ©ã˜ã‚ƒãªãã¦VMã ã—ç¾æ™‚ç‚¹ã§ã¯å½“ç„¶ã‹ã‚‚

```bash
# goby
root@2f8e5db5270e:/go/src/github.com/goby-lang/goby$ time goby /src/fib.gb
832040

real    0m15.062s
user    0m15.550s
sys     0m1.060s

# ruby
root@ca3eab5d71fa:/$ time ruby /src/fib.gb
832040

real    0m0.107s
user    0m0.090s
sys     0m0.010s
```

---

## Goroutine
- - -

- Goroutineã¯Threadãƒ¡ã‚½ãƒƒãƒ‰ã§ä½œæˆã§ãã‚‹
- ãƒãƒ£ãƒ³ãƒãƒ«ã‚‚åˆ©ç”¨ã®å¯èƒ½

```ruby
c = Channel.new

i = 0
thread do
  i += 1
  c.deliver(i)
end

c.receive
i += 1 # This will not execute until the thread ends
puts i
```

---

## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- - -

- Goã§æ›¸ã„ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„**goã®å„ç¨®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’soãƒ•ã‚¡ã‚¤ãƒ«çµŒç”±**ã§å‘¼ã¹ã‚‹
- Goã®ãƒ–ãƒ©ã‚°ã‚¤ãƒ³ç”±æ¥ã®æ©Ÿèƒ½ã‚‰ã—ã„ã®ã§**ç¾åœ¨ã¯Linuxã®ã¿**ã‚µãƒãƒ¼ãƒˆ

```ruby
require "plugin"

p = Plugin.generate("fmt") do |p|
  p.import_pkg("", "fmt")
  p.link_function("fmt", "Printf")
end

p.go_func("Printf", "Hello Goby\n")
```

---

## å®Ÿè¡Œçµæœ
- - -

- Goå´ã®æ©Ÿèƒ½ãŒå‘¼ã°ã‚ŒãŸã®ãŒç¢ºèªã§ãã‚‹
- åˆå›ã¯pluginsé…ä¸‹ã«**Goãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›ã—ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹**ã®ã§æ™‚é–“ãŒã‹ã‹ã‚‹

```bash
root@50f627e13336:/go/src/github.com/goby-lang/goby% find plugins
find: 'plugins': No such file or directory
root@50f627e13336:/go/src/github.com/goby-lang/goby% goby /src/sample3.gb
Hello Goby
root@50f627e13336:/go/src/github.com/goby-lang/goby% find plugins
plugins
plugins/fmt.so
plugins/fmt.go
```

---

## plugins/fmt.go ã®ä¸­èº«
- - -

- pluginsã«ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªgoãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã‚Œã‚‹

```go
package main
import(
         "fmt"
)

var Printf = fmt.Printf
func main() {}
```

---

## ãƒ•ã‚£ãƒœãƒŠãƒƒãƒ with Plugin
- - -

- Goã§ãƒ•ã‚£ãƒœãƒŠãƒƒãƒã‚’æ›¸ã„ã¦Gobyã‹ã‚‰å‘¼ã³å‡ºã™
- è‡ªåˆ†ã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã¯**Plugin.use**ã§ä½¿ã†
- ä¿®æ­£æ™‚ã¯soãƒ•ã‚¡ã‚¤ãƒ«ã®æ¶ˆã—å¿˜ã‚Œã«æ³¨æ„

```go
package main

func Fib(n int) int {
    if n <= 1 {
        return n
    }
    return Fib(n-1) + Fib(n-2)
}

func main() {}
```

```ruby
require "plugin"

p = Plugin.use "/src/fib.go"
r = p.go_func("Fib", 40)

puts(r) #=> "102334155"
```

---

## å®Ÿè¡Œçµæœ
- - -

- Rubyã‚ˆã‚Šã€ãšã£ã¨ã¯ã‚„ã„!!
- å¤šåˆ†Goã¨åŒç­‰

```bash
# goby+goã§fib(40)ã®å®Ÿè¡Œçµæœ
root@ac9feea852f8:/go/src/github.com/goby-lang/goby$ time goby /src/sample4.gb 
102334155

real	0m0.909s
user	0m0.910s
sys	0m0.010s

# rubyã§fib(40)ã®å®Ÿè¡Œçµæœ
$ ruby src/fib40.rb  
102334155

real	0m15.987s
user	0m15.76s  
sys	0m0.0.11s 
```

---

## ä½•ãŒå¬‰ã—ã„ã‹
- - - 

- é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¦ã™ã‚‹éƒ¨åˆ†ã‚’ç§»è­²ã§ãã‚‹
- å®Œæˆåº¦ã®é«˜ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’çµ„ã¿è¾¼ã‚ã‚‹
- goã«ç¿’ç†Ÿã—ã¦ãªãã¦ã‚‚æ¯”è¼ƒçš„å®‰å…¨ãªãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œã‚Œã‚‹ï¼Ÿï¼Ÿï¼Ÿ

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- - - 

- Macãªã‚‰brewã§ã‚‚è‰¯ã„ãŒPluginå‘¨ã‚Šã®è©±ã‚‚ã‚ã‚‹ã®ã§Dockeræ¨å¥¨
- REPLã‚‚ã‚ã‚‹

```bash
$ docker run -it -v `pwd`/src:/src gobylang/goby /bin/bash
root@10852cfa40a2:/go/src/github.com/goby-lang/goby# goby -v
0.1.3
root@10852cfa40a2:/go/src/github.com/goby-lang/goby# goby -i
Goby 0.1.3 ğŸ˜º ğŸ˜‰ ğŸ¤£
Â» 1+1
#Â» 2
```

---


## ã¾ã¨ã‚
- - -

- Rubyãƒ©ã‚¤ã‚¯ãªæ–‡æ³•ã§Goè¨€èªã®æ©Ÿèƒ½ã‚’ä½¿ãˆã‚‹ã®ãŒé¢ç™½ã„
- å›°ã£ãŸã‚‰ã‚³ãƒ¼ãƒ‰èª­ã¾ãªã„ã¨ãªã®ã§Goã®å‹‰å¼·ã«ãªã‚‹
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆå«ã‚ãŸã‚·ãƒ³ã‚°ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã¨ã‹ã¯è©¦ã—ã¦ã¿ãŸã„
- GAEã‚„AWS Lambadaã®ã‚¹ãƒ”ãƒ³ã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒ å«ã‚ãŸãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚‚å–ã£ã¦ã¿ãŸã„
    ã€€
	ã€€</script>
      </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>


		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
